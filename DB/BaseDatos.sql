-- Crear la base de datos
-- reemplazar el usuario para ejecutar este comando 
psql -U [usuario] -c "CREATE DATABASE prueba_tata;"




-- DROP SCHEMA public;

CREATE SCHEMA public AUTHORIZATION pg_database_owner;

-- DROP SEQUENCE public.cliente_cliente_id_seq;

CREATE SEQUENCE public.cliente_cliente_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 9223372036854775807
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE public.cuenta_cuenta_id_seq;

CREATE SEQUENCE public.cuenta_cuenta_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 9223372036854775807
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE public.movimiento_movimiento_id_seq;

CREATE SEQUENCE public.movimiento_movimiento_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 9223372036854775807
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE public.persona_persona_id_seq;

CREATE SEQUENCE public.persona_persona_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 9223372036854775807
	START 1
	CACHE 1
	NO CYCLE;-- public.cuenta definition

-- Drop table

-- DROP TABLE public.cuenta;

CREATE TABLE public.cuenta (
	cuenta_id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	cliente_id int8 NULL,
	estado bool NULL,
	numero_cuenta varchar(255) NULL,
	saldo_inicial numeric(38, 2) NULL,
	tipo_cuenta varchar(255) NULL,
	CONSTRAINT cuenta_pkey PRIMARY KEY (cuenta_id)
);


-- public.persona definition

-- Drop table

-- DROP TABLE public.persona;

CREATE TABLE public.persona (
	persona_id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	direccion varchar(255) NULL,
	edad int4 NOT NULL,
	genero varchar(255) NULL,
	identificacion varchar(255) NULL,
	nombre varchar(255) NULL,
	telefono varchar(255) NULL,
	CONSTRAINT persona_pkey PRIMARY KEY (persona_id)
);


-- public.cliente definition

-- Drop table

-- DROP TABLE public.cliente;

CREATE TABLE public.cliente (
	cliente_id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	contrasenia varchar(255) NULL,
	estado bool NULL,
	persona_id int8 NULL,
	CONSTRAINT cliente_pkey PRIMARY KEY (cliente_id),
	CONSTRAINT ukfp4oq6jpmv4n8xirq1dt5910b UNIQUE (persona_id),
	CONSTRAINT fkmc52upywn8gona2iiwwwphb92 FOREIGN KEY (persona_id) REFERENCES public.persona(persona_id)
);


-- public.movimiento definition

-- Drop table

-- DROP TABLE public.movimiento;

CREATE TABLE public.movimiento (
	movimiento_id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	fecha timestamp(6) NOT NULL,
	saldo numeric(38, 2) NULL,
	tipo_movimiento varchar(255) NULL,
	valor numeric(38, 2) NULL,
	cuenta_id int8 NULL,
	CONSTRAINT movimiento_pkey PRIMARY KEY (movimiento_id),
	CONSTRAINT fk4ea11fe7p3xa1kwwmdgi9f2fi FOREIGN KEY (cuenta_id) REFERENCES public.cuenta(cuenta_id)
);


-- para los insert en la base se ejecuta lo siguiente

INSERT INTO public.persona
(persona_id, direccion, edad, genero, identificacion, nombre, telefono)
VALUES(1, 'QUITO SUR', 32, 'masculino', '1751803162', 'andres alquinga', '0985632147');
INSERT INTO public.persona
(persona_id, direccion, edad, genero, identificacion, nombre, telefono)
VALUES(2, 'QUITO SUR', 32, 'masculino', '1751844162', 'daniel diaz', '0985632147');
INSERT INTO public.persona
(persona_id, direccion, edad, genero, identificacion, nombre, telefono)
VALUES(3, 'SOLANDA', 29, 'masculino', '1256348790', 'luis aguirre', '0974581362');
INSERT INTO public.persona
(persona_id, direccion, edad, genero, identificacion, nombre, telefono)
VALUES(4, 'KENEDY', 24, 'masculino', '1325469870', 'jorge sarmiento', '09784512630');
INSERT INTO public.persona
(persona_id, direccion, edad, genero, identificacion, nombre, telefono)
VALUES(6, 'KENEDY', 24, 'masculino', '0994153187', 'andres sarmiento', '0994153187');
INSERT INTO public.persona
(persona_id, direccion, edad, genero, identificacion, nombre, telefono)
VALUES(7, 'SAN BARTOLO', 20, 'femenino', '9999999999', 'melisa llive', '0999999999');
INSERT INTO public.persona
(persona_id, direccion, edad, genero, identificacion, nombre, telefono)
VALUES(5, 'QUITO SUR', 30, 'masculino', '1325469870', 'Lenin valenzuela', '0985632147');



INSERT INTO public.cliente
(cliente_id, contrasenia, estado, persona_id)
VALUES(1, '12345', true, 1);
INSERT INTO public.cliente
(cliente_id, contrasenia, estado, persona_id)
VALUES(2, '5678', true, 2);
INSERT INTO public.cliente
(cliente_id, contrasenia, estado, persona_id)
VALUES(3, '963258', true, 3);
INSERT INTO public.cliente
(cliente_id, contrasenia, estado, persona_id)
VALUES(4, '452152', true, 4);
INSERT INTO public.cliente
(cliente_id, contrasenia, estado, persona_id)
VALUES(5, '6987', true, 5);
INSERT INTO public.cliente
(cliente_id, contrasenia, estado, persona_id)
VALUES(6, '452152', true, 6);
INSERT INTO public.cliente
(cliente_id, contrasenia, estado, persona_id)
VALUES(7, '999999', true, 7);


INSERT INTO public.cuenta
(cuenta_id, cliente_id, estado, numero_cuenta, saldo_inicial, tipo_cuenta)
VALUES(1, 1, true, '333444', 10.00, 'Ahorros');
INSERT INTO public.cuenta
(cuenta_id, cliente_id, estado, numero_cuenta, saldo_inicial, tipo_cuenta)
VALUES(2, 2, true, '89789', 203.00, 'CORRIENTE');
INSERT INTO public.cuenta
(cuenta_id, cliente_id, estado, numero_cuenta, saldo_inicial, tipo_cuenta)
VALUES(3, 3, true, '101112', 1000.00, 'CORRIENTE');
INSERT INTO public.cuenta
(cuenta_id, cliente_id, estado, numero_cuenta, saldo_inicial, tipo_cuenta)
VALUES(4, 4, true, '22366', 85.00, 'Ahorros');
INSERT INTO public.cuenta
(cuenta_id, cliente_id, estado, numero_cuenta, saldo_inicial, tipo_cuenta)
VALUES(5, 6, true, '12345', 0.00, 'Ahorros');
INSERT INTO public.cuenta
(cuenta_id, cliente_id, estado, numero_cuenta, saldo_inicial, tipo_cuenta)
VALUES(6, 7, true, '999999', 100.00, 'Ahorros');


INSERT INTO public.movimiento
(movimiento_id, fecha, saldo, tipo_movimiento, valor, cuenta_id)
VALUES(1, '2024-08-08 14:44:34.000', 990.00, 'Retiro', 10.00, 3);
INSERT INTO public.movimiento
(movimiento_id, fecha, saldo, tipo_movimiento, valor, cuenta_id)
VALUES(2, '2024-09-08 23:19:28.902', 1020.00, 'Deposito', 20.00, 6);